---
extends: script
ignorecase: true
level: error
message: "There are an odd number of table delimiter blocks in the module, check you have opening and closing delimiters (|===) for each table."
link: https://docs.asciidoctor.org/asciidoc/latest/directives/ifdef-ifndef/
scope: raw
script: |
  text := import("text")
  
  matches := []

  tbl_delimiter_regex := "\\|==="
  counter := 0
  for line in text.split(scope, "\n") {
    if text.re_match(tbl_delimiter_regex, line) {
      counter ++
      }
      }
  
  if counter % 2 == 1{
    matches = append(matches, {begin: 0, end: len(scope)})
    } 